<div >
<app-ncats-header></app-ncats-header>

<mat-sidenav-container class="content">
  <button type="button" class="sidenavToggle" mat-raised-button [color]="'accent'" (click)="sidenav.toggle()">
    <mat-icon>menu</mat-icon>
  </button>

  <mat-sidenav #sidenav [mode]="'over'" class = "upperSection">
    <!-- sidenav content -->
    <app-filter-panel></app-filter-panel>
  </mat-sidenav>

  <!-- primary content -->
<div >
  <div *ngIf="loading" class = "loadingIcon" fxLayoutAlign="center center">
    <mat-spinner></mat-spinner>
  </div>

  <mat-expansion-panel [expanded]="'true'">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <h1>{{years.join(", ")}} Overview</h1><br>
      </mat-panel-title>
    </mat-expansion-panel-header>

    <!-- <div fxLayout="row" fxLayoutAlign="start center" id="yearFilter">
     </div>-->
    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="center none">
    <div fxFlex="33">
      <mat-card>
        <h3>First gene therapies approved (3 in all)</h3>
      <mat-list>
        <mat-list-item><a href = "https://drugs.ncats.io/ginas/app/drug/2SPI046IKD" target="_blank">voretigene neparvovec</a></mat-list-item>
        <mat-list-item><a href = "https://drugs.ncats.io/ginas/app/drug/U2I8T43Y7R" target="_blank">axicabtagene ciloleucel</a></mat-list-item>
        <mat-list-item><a href = "https://drugs.ncats.io/ginas/app/drug/Q6C9WHR03O" target="_blank">tisagenlecleucel</a></mat-list-item>
      </mat-list>
        <h3>clinical development times: </h3>
        <mat-list>
          <mat-list-item>Median –  {{median}} years</mat-list-item>
          <mat-list-item> Shortest – {{min?.developmentTime }} years -- {{min?.ingredients }}</mat-list-item>
          <mat-list-item> Longest – {{max?.developmentTime }} years -- {{max?.ingredients }}</mat-list-item>
        </mat-list>
      </mat-card>
    </div>
    <div fxFlex="33">
      <mat-card>
        <app-time-counts></app-time-counts>
      </mat-card>
    </div>
    <div fxFlex="33">
      <mat-card>
      <app-drug-counts></app-drug-counts>
      </mat-card>
    </div>
  </div>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="'true'">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <h1>{{years.join(", ")}} Timeline</h1><br>
      </mat-panel-title>
    </mat-expansion-panel-header>
  <div fxLayout="row" id="timeLine">
     <div fxFlex="99">
           <app-timeline></app-timeline>
   </div>
 </div>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="'true'">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <h1>{{years.join(", ")}} Details</h1><br>
      </mat-panel-title>
    </mat-expansion-panel-header>
 <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="center none">
   <div fxFlex="33">
     <mat-card>
     <app-drug-charts [fields]="['substanceClass','moleculeType']" [label]="'Substance Class'"></app-drug-charts>
     </mat-card>
   </div>
  <div fxFlex="33">
    <mat-card>
    <app-drug-charts [fields]="['therapeuticClass', 'substanceClass']" [label]="'Therapeutic Class'"></app-drug-charts>
    </mat-card>
   </div>
   <!--
   <div fxFlex="33">
   <app-drug-charts [field]="'pharmacology'" [label]="'Pharmacology'"></app-drug-charts>
   </div>-->
 </div>
  </mat-expansion-panel>

  <mat-expansion-panel [expanded]="'true'">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <h1>{{years.join(", ")}} All Drugs</h1><br>
      </mat-panel-title>
    </mat-expansion-panel-header>
 <div fxLayout="row">
   <div fxFlex="99">
   <app-drug-details></app-drug-details>
   </div>
 </div>
  </mat-expansion-panel>
</div>
</mat-sidenav-container>
</div>
<!--Scroll to top-->
<div class="scroll-to-top" [ngClass]="{'show-scroll': navIsFixed}">
  <button  mat-fab color="primary" (click)="scrollToTop()">
    <mat-icon> arrow_upward </mat-icon>
  </button>
</div>
<app-ncats-footer class ="footer"></app-ncats-footer>








